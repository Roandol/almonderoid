import{E as t,s as n}from"./index-60d8f3df.js";const e=[];function s(s,o=t){let f;const i=new Set;function c(t){if(n(s,t)&&(s=t,f)){const t=!e.length;for(const n of i)n[1](),e.push(n,s);if(t){for(let t=0;t<e.length;t+=2)e[t][0](e[t+1]);e.length=0}}}return{set:c,update:function(t){c(t(s))},subscribe:function(n,e=t){const r=[n,e];return i.add(r),1===i.size&&(f=o(c)||t),n(s),()=>{i.delete(r),0===i.size&&(f(),f=null)}}}}export{s as w};
