import{R as ie,S as zt,i as $t,s as qt,K as ht,L as ct,a as v,d,b as u,g as X,G as i,E as Ft,T as Ut,Q as jt,e as g,t as x,k as R,c as _,h as E,m as G,N as re,U as le,p as Wt,q as rt,o as dt,j as Lt,V as at,w as oe,x as ne,y as he,B as ce,n as Jt,W as de}from"../chunks/index-60d8f3df.js";import{k as Qt,i as Zt,h as ut,l as ot,a as te,s as nt}from"../chunks/index-5da914bf.js";import"../chunks/index-1873ca51.js";function ue(t){const e=t-1;return e*e*e+1}function fe(t,{delay:e=0,duration:s=400,easing:a=ie}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:a,css:o=>`opacity: ${o*l}`}}function pe(t,{delay:e=0,duration:s=400,easing:a=ue,x:l=0,y:o=0,opacity:r=0}={}){const p=getComputedStyle(t),n=+p.opacity,h=p.transform==="none"?"":p.transform,c=n*(1-r);return{delay:e,duration:s,easing:a,css:(A,C)=>`
			transform: ${h} translate(${(1-A)*l}px, ${(1-A)*o}px);
			opacity: ${n-c*C}`}}function me(t){let e,s,a,l;return{c(){e=ht("svg"),s=ht("path"),this.h()},l(o){e=ct(o,"svg",{class:!0,xmlns:!0,"xml:space":!0,viewBox:!0});var r=v(e);s=ct(r,"path",{d:!0}),v(s).forEach(d),r.forEach(d),this.h()},h(){u(s,"d","M204.5 21.4a72 72 0 0 0-120.8 67L2.2 169.9a7.5 7.5 0 1 0 10.6 10.6L61.2 132l14.7 6.5-27.7 27.7A7.5 7.5 0 1 0 58.8 177l27.9-28 6.6 14.6-48.7 48.7A7.5 7.5 0 1 0 55.2 223l81.1-81a72.3 72.3 0 0 0 68.2-19 72 72 0 0 0 0-101.5zm-99.9 131L99.1 140a27.6 27.6 0 0 0-14-13.9l-12.5-5.5L89.3 104a71.5 71.5 0 0 0 31.6 32l-16.3 16.3zm80.3-49a43.9 43.9 0 0 1-62.5 0 44.2 44.2 0 1 1 62.5 0zm-10.6-51.9a29.2 29.2 0 1 1-41.4 41.3 29.2 29.2 0 0 1 41.4-41.3z"),u(e,"class","h-8 w-8 fill-secondary"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"xml:space","preserve"),u(e,"viewBox","0 0 225.5 225.5")},m(o,r){X(o,e,r),i(e,s),l=!0},p:Ft,i(o){l||(a&&a.end(1),l=!0)},o(o){a=Ut(e,pe,{y:-20,opacity:0,duration:700}),l=!1},d(o){o&&d(e),o&&a&&a.end()}}}class ve extends zt{constructor(e){super(),$t(this,e,null,me,qt,{})}}function Dt(t,e,s,a,l,o){const r=s+o,p=t-a,n=e-l;return r>Math.sqrt(p*p+n*n)}const $=[];let H=[];const ee=t=>{$[t.key]=!0},se=t=>{$[t.key]=!1,(t.key===" "||t.key===jt(Qt).shootKey)&&(H=[new _e(K.angle),...H])};function Ot(t){t.x=Z/2,t.y=tt/2,t.velX=0,t.velY=0}const Z=640,tt=480;let K,Y,S,f=[],xt=0;const St="HighScore";let it=4;const ye=8,j={forwardKey:"",leftKey:"",rightKey:"",shootKey:""};Qt.subscribe(t=>{j.forwardKey=t.forwardKey,j.leftKey=t.leftKey,j.rightKey=t.rightKey,j.shootKey=t.shootKey});function ae(){if(requestAnimationFrame(ae),K.movingForward=$.ArrowUp||$[j.forwardKey],($.ArrowRight||$[j.rightKey])&&K.rotate(1),($.ArrowLeft||$[j.leftKey])&&K.rotate(-1),S.clearRect(0,0,Z,tt),jt(ot)<=0&&(document.body.removeEventListener("keydown",ee),document.body.removeEventListener("keyup",se),K.visible=!1,te.set(!0)),f.length===0){Ot(K),ot.update(e=>e+=1);let t=0;for(it+=1,t;t<it;t++){const e=new Q;e.speed+=.25,f=[e,...f]}it>=ye&&(it=4)}if(f.length!==0){let t=0;for(t;t<f.length;t++)Dt(K.x,K.y,11,f[t].x,f[t].y,f[t].collisionRadius)&&(Ot(K),ot.update(e=>e-=1))}if(f.length!==0&&H.length!==0){let t=0;t:for(t;t<f.length;t++){let e=0;for(e;e<H.length;e++)if(Dt(H[e].x,H[e].y,3,f[t].x,f[t].y,f[t].collisionRadius)){f[t].level===1?(f.push(new Q(f[t].x-5,f[t].y-5,25,2,22,2)),f.push(new Q(f[t].x+5,f[t].y+5,25,2,22,2)),nt.update(s=>s+=20)):f[t].level===2&&(f.push(new Q(f[t].x-5,f[t].y-5,15,3,12,2.5)),f.push(new Q(f[t].x+5,f[t].y+5,15,3,12,2.5)),nt.update(s=>s+=30)),f.splice(t,1),H.splice(e,1),nt.update(s=>(s+=15,xt=s,s));break t}}}if(K.visible&&(K.update(),K.draw(),ut.update(t=>(localStorage.setItem(St,JSON.stringify(Math.max(xt,t))),Math.max(xt,t)))),H.length!==0){let t=0;for(t;t<H.length;t++)H[t].update(),H[t].draw()}if(f.length!==0){let t=0;for(t;t<f.length;t++)f[t].update(),f[t].draw()}}function ge(){Y=document.getElementById("game"),S=Y.getContext("2d"),Zt.set(!0),K=new we;let t=0;for(t;t<it;t++)f=[new Q,...f];document.body.addEventListener("keydown",ee),document.body.addEventListener("keyup",se),localStorage.getItem(St)?ut.set(parseInt(localStorage.getItem(St))):ut.set(0),ae()}class Mt{constructor(e,s,a,l){this.visible=!0,this.x=e,this.y=s,this.speed=a,this.angle=l}}class _e extends Mt{constructor(e){super(K.noseX,K.noseY,5,e),this.height=4,this.width=4,this.velX=0,this.velY=0,this.radians=this.angle/Math.PI*180}update(){this.x-=Math.cos(this.radians)*this.speed,this.y-=Math.sin(this.radians)*this.speed}draw(){S.fillStyle="#fe3637",S.beginPath(),S.arc(this.x,this.y,3,0,2*Math.PI,!1),S.fill()}}const Et=(t,e)=>(Math.random()*(e-t+1)&4294967295)+t;class Q extends Mt{constructor(e=Et(Z,Z*2),s=Et(tt,tt*2),a=50,l=1,o=46,r=1.5){super(e,s,r,Et(2,359)),this.strokeColor="white",this.radians=this.angle/Math.PI*180,this.radius=a,this.collisionRadius=o,this.level=l}update(){this.x+=Math.cos(this.radians)*this.speed,this.y+=Math.sin(this.radians)*this.speed,this.x<this.radius&&(this.x=Y.width),this.x>Y.width&&(this.x=this.radius),this.y<this.radius&&(this.y=Y.height),this.y>Y.height&&(this.y=this.radius)}draw(){S.strokeStyle=this.strokeColor,S.beginPath();const e=Math.PI*2/6;let s=0;for(s;s<6;s++)S.lineTo(this.x-this.radius*Math.cos(e*s+this.radians),this.y-this.radius*Math.sin(e*s+this.radians));S.closePath(),S.stroke()}}class we extends Mt{constructor(){super(Z/2,tt/2,.04,0),this.movingForward=!1,this.velX=0,this.velY=0,this.rotateSpeed=.001,this.radius=15,this.strokeColor="#0978d2",this.noseX=Z/2+15,this.noseY=tt/2}rotate(e){this.angle+=this.rotateSpeed*e}update(){const e=this.angle/Math.PI*180;this.movingForward&&(this.velX+=Math.cos(e)*this.speed,this.velY+=Math.sin(e)*this.speed),this.x<this.radius&&(this.x=Y.width),this.x>Y.width&&(this.x=this.radius),this.y<this.radius&&(this.y=Y.height),this.y>Y.height&&(this.y=this.radius),this.velX*=.99,this.velY*=.99,this.x-=this.velX,this.y-=this.velY}draw(){S.strokeStyle=this.strokeColor,S.beginPath();const e=Math.PI*2/3,s=this.angle/Math.PI*180;this.noseX=this.x-this.radius*Math.cos(s),this.noseY=this.y-this.radius*Math.sin(s);let a=0;for(a;a<3;a++)S.lineTo(this.x-this.radius*Math.cos(e*a+s),this.y-this.radius*Math.sin(e*a+s));S.closePath(),S.stroke()}}function Vt(t,e,s){const a=t.slice();return a[6]=e[s],a[8]=s,a}function Xt(t){let e,s,a,l,o,r,p,n,h,c,A,C,B,N,I,M,L,q,D,b,w,y,m,k,F,O,P,z,W,ft,T,pt,mt,vt,U,yt,gt,Kt;return{c(){e=g("section"),s=g("div"),a=g("h2"),l=x("Play the Game"),o=R(),r=g("button"),p=ht("svg"),n=ht("path"),h=R(),c=g("div"),A=g("h3"),C=g("kbd"),B=x("space"),N=x(" to shoot"),I=R(),M=g("h3"),L=g("kbd"),q=x("w"),D=x(" to go forward"),b=R(),w=g("h3"),y=g("kbd"),m=x("a"),k=x(" to rotate left"),F=R(),O=g("h3"),P=g("kbd"),z=x("d"),W=x(" to rotate right"),ft=R(),T=g("p"),pt=x("you can also change"),mt=g("br"),vt=x(`
					the settings of the game
					`),U=g("a"),yt=x("here"),this.h()},l(et){e=_(et,"SECTION",{class:!0});var J=v(e);s=_(J,"DIV",{class:!0});var lt=v(s);a=_(lt,"H2",{class:!0});var At=v(a);l=E(At,"Play the Game"),At.forEach(d),o=G(lt),r=_(lt,"BUTTON",{});var It=v(r);p=ct(It,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Ct=v(p);n=ct(Ct,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(n).forEach(d),Ct.forEach(d),It.forEach(d),lt.forEach(d),h=G(J),c=_(J,"DIV",{class:!0});var V=v(c);A=_(V,"H3",{});var _t=v(A);C=_(_t,"KBD",{class:!0});var Pt=v(C);B=E(Pt,"space"),Pt.forEach(d),N=E(_t," to shoot"),_t.forEach(d),I=G(V),M=_(V,"H3",{});var wt=v(M);L=_(wt,"KBD",{class:!0});var Rt=v(L);q=E(Rt,"w"),Rt.forEach(d),D=E(wt," to go forward"),wt.forEach(d),b=G(V),w=_(V,"H3",{});var bt=v(w);y=_(bt,"KBD",{class:!0});var Gt=v(y);m=E(Gt,"a"),Gt.forEach(d),k=E(bt," to rotate left"),bt.forEach(d),F=G(V),O=_(V,"H3",{});var kt=v(O);P=_(kt,"KBD",{class:!0});var Bt=v(P);z=E(Bt,"d"),Bt.forEach(d),W=E(kt," to rotate right"),kt.forEach(d),ft=G(V),T=_(V,"P",{class:!0});var st=v(T);pt=E(st,"you can also change"),mt=_(st,"BR",{}),vt=E(st,`
					the settings of the game
					`),U=_(st,"A",{class:!0,href:!0});var Ht=v(U);yt=E(Ht,"here"),Ht.forEach(d),st.forEach(d),V.forEach(d),J.forEach(d),this.h()},h(){u(a,"class","mb-5 text-xl"),u(n,"fill-rule","evenodd"),u(n,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),u(n,"clip-rule","evenodd"),u(p,"xmlns","http://www.w3.org/2000/svg"),u(p,"class","transition-color h-20 w-20 duration-300 hover:text-primary"),u(p,"viewBox","0 0 20 20"),u(p,"fill","currentColor"),u(s,"class","flex flex-col items-center"),u(C,"class","kbd"),u(L,"class","kbd"),u(y,"class","kbd"),u(P,"class","kbd"),u(U,"class","link decoration-wavy hover:text-primary"),u(U,"href","/config"),u(T,"class","text-sm"),u(c,"class","row-span-2 space-y-2"),u(e,"class","absolute inset-0 grid grid-rows-3 place-items-center")},m(et,J){X(et,e,J),i(e,s),i(s,a),i(a,l),i(s,o),i(s,r),i(r,p),i(p,n),i(e,h),i(e,c),i(c,A),i(A,C),i(C,B),i(A,N),i(c,I),i(c,M),i(M,L),i(L,q),i(M,D),i(c,b),i(c,w),i(w,y),i(y,m),i(w,k),i(c,F),i(c,O),i(O,P),i(P,z),i(O,W),i(c,ft),i(c,T),i(T,pt),i(T,mt),i(T,vt),i(T,U),i(U,yt),gt||(Kt=re(r,"click",t[5]),gt=!0)},p:Ft,d(et){et&&d(e),gt=!1,Kt()}}}function Yt(t){let e,s,a;return{c(){e=g("div"),s=g("span"),a=x("GAME OVER"),this.h()},l(l){e=_(l,"DIV",{class:!0});var o=v(e);s=_(o,"SPAN",{class:!0});var r=v(s);a=E(r,"GAME OVER"),r.forEach(d),o.forEach(d),this.h()},h(){u(s,"class","text-3xl text-primary"),u(e,"class","absolute top-1/2 left-1/2 -translate-x-1/2 transform")},m(l,o){X(l,e,o),i(e,s),i(s,a)},d(l){l&&d(e)}}}function Tt(t){let e,s=[],a=new Map,l,o,r=Array(t[4]);const p=n=>n[8];for(let n=0;n<r.length;n+=1){let h=Vt(t,r,n),c=p(h);a.set(c,s[n]=Nt(c))}return{c(){e=g("ul");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=_(n,"UL",{class:!0});var h=v(e);for(let c=0;c<s.length;c+=1)s[c].l(h);h.forEach(d),this.h()},h(){u(e,"class","rounded-box inline-flex bg-neutral py-3 px-5")},m(n,h){X(n,e,h);for(let c=0;c<s.length;c+=1)s[c].m(e,null);o=!0},p(n,h){h&16&&(r=Array(n[4]),Jt(),s=le(s,h,p,1,n,r,a,e,de,Nt,null,Vt),Wt())},i(n){if(!o){for(let h=0;h<r.length;h+=1)rt(s[h]);l&&l.end(1),o=!0}},o(n){for(let h=0;h<s.length;h+=1)dt(s[h]);l=Ut(e,fe,{duration:1e3}),o=!1},d(n){n&&d(e);for(let h=0;h<s.length;h+=1)s[h].d();n&&l&&l.end()}}}function Nt(t,e){let s,a,l,o;return a=new ve({}),{key:t,first:null,c(){s=g("li"),oe(a.$$.fragment),l=R(),this.h()},l(r){s=_(r,"LI",{});var p=v(s);ne(a.$$.fragment,p),l=G(p),p.forEach(d),this.h()},h(){this.first=s},m(r,p){X(r,s,p),he(a,s,null),i(s,l),o=!0},p(r,p){},i(r){o||(rt(a.$$.fragment,r),o=!0)},o(r){dt(a.$$.fragment,r),o=!1},d(r){r&&d(s),ce(a)}}}function be(t){let e,s,a,l,o,r,p,n,h,c,A,C,B,N,I,M,L,q,D,b=!t[2]&&Xt(t),w=t[3]&&Yt(),y=t[4]>0&&Tt(t);return{c(){e=g("div"),s=g("h2"),a=x("SCORE: "),l=x(t[0]),o=R(),r=g("h2"),p=x("HIGHSCORE: "),n=x(t[1]),h=R(),c=g("div"),b&&b.c(),A=R(),w&&w.c(),C=R(),B=g("canvas"),N=R(),I=g("div"),M=g("a"),L=x("RESET GAME"),q=R(),y&&y.c(),this.h()},l(m){e=_(m,"DIV",{class:!0});var k=v(e);s=_(k,"H2",{});var F=v(s);a=E(F,"SCORE: "),l=E(F,t[0]),F.forEach(d),o=G(k),r=_(k,"H2",{});var O=v(r);p=E(O,"HIGHSCORE: "),n=E(O,t[1]),O.forEach(d),k.forEach(d),h=G(m),c=_(m,"DIV",{class:!0});var P=v(c);b&&b.l(P),A=G(P),w&&w.l(P),C=G(P),B=_(P,"CANVAS",{class:!0,height:!0,width:!0,id:!0}),v(B).forEach(d),P.forEach(d),N=G(m),I=_(m,"DIV",{class:!0});var z=v(I);M=_(z,"A",{class:!0,"sveltekit:reload":!0,href:!0});var W=v(M);L=E(W,"RESET GAME"),W.forEach(d),q=G(z),y&&y.l(z),z.forEach(d),this.h()},h(){u(e,"class","my-2 inline-flex w-full justify-between text-lg"),u(B,"class","rounded-box border-2 border-primary bg-neutral shadow-md shadow-red-600/50"),u(B,"height","460"),u(B,"width","640"),u(B,"id","game"),u(c,"class","relative"),u(M,"class","btn border-2 border-primary"),u(M,"sveltekit:reload",""),u(M,"href","/"),u(I,"class","my-5 inline-flex w-full items-center justify-between")},m(m,k){X(m,e,k),i(e,s),i(s,a),i(s,l),i(e,o),i(e,r),i(r,p),i(r,n),X(m,h,k),X(m,c,k),b&&b.m(c,null),i(c,A),w&&w.m(c,null),i(c,C),i(c,B),X(m,N,k),X(m,I,k),i(I,M),i(M,L),i(I,q),y&&y.m(I,null),D=!0},p(m,[k]){(!D||k&1)&&Lt(l,m[0]),(!D||k&2)&&Lt(n,m[1]),m[2]?b&&(b.d(1),b=null):b?b.p(m,k):(b=Xt(m),b.c(),b.m(c,A)),m[3]?w||(w=Yt(),w.c(),w.m(c,C)):w&&(w.d(1),w=null),m[4]>0?y?(y.p(m,k),k&16&&rt(y,1)):(y=Tt(m),y.c(),rt(y,1),y.m(I,null)):y&&(Jt(),dt(y,1,1,()=>{y=null}),Wt())},i(m){D||(rt(y),D=!0)},o(m){dt(y),D=!1},d(m){m&&d(e),m&&d(h),m&&d(c),b&&b.d(),w&&w.d(),m&&d(N),m&&d(I),y&&y.d()}}}function ke(t,e,s){let a,l,o,r,p;return at(t,nt,h=>s(0,a=h)),at(t,ut,h=>s(1,l=h)),at(t,Zt,h=>s(2,o=h)),at(t,te,h=>s(3,r=h)),at(t,ot,h=>s(4,p=h)),[a,l,o,r,p,()=>ge()]}class Me extends zt{constructor(e){super(),$t(this,e,ke,be,qt,{})}}export{Me as default};
